<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <title>Document</title>
</head>

<body style="align-items: center; display: flex; flex-direction: column;">
  <h1> Create Your Dish</h1>
  <div class="container border pb-3 shadow-sm p-3 mb-5 bg-body-tertiary rounded mt-5">
    <div><label for="section">Section:</label>
      <select id="section">
        <option value="popularChoice"> Popular Choice</option>
        <option value="seasonalSpecialty">Seasonal Specialty</option>
        <option value="bestCombo">Best Combo</option>
      </select>
    </div>
    <button class="btn btn-primary" id="reset"
      style="position: absolute; left: 88%; top: 20%; margin: 0;">Reset</button>
    <br>
    <div class="input-group mb-3 mt-3">
      <span class="input-group-text bg-secondary-subtle" id="basic-addon1">Name</span>
      <input id="Name" type="text" class="form-control row-6" placeholder="Name" aria-label="Username"
        aria-describedby="basic-addon1" />
    </div>
    <div class="input-group mb-3 mt-3">
      <span class="input-group-text bg-secondary-subtle" id="basic-addon1">Type</span>
      <input id="Type" type="text" class="form-control row-6" placeholder="Type" aria-label="Username"
        aria-describedby="basic-addon1" />
    </div>
    <div class="input-group mb-3 mt-3">
      <span class="input-group-text bg-secondary-subtle" id="basic-addon1">Price</span>
      <input id="price" type="text" class="form-control row-6" placeholder="Price" aria-label="Username"
        aria-describedby="basic-addon1" />
    </div>
    <div class="input-group mb-3 mt-3">
      <span class="input-group-text bg-secondary-subtle" id="basic-addon1">Ingredients</span>
      <input id="ingredients" type="text" class="form-control row-6" placeholder="Ingredients" aria-label="Username"
        aria-describedby="basic-addon1" />
    </div>
    <div class="input-group mb-3 mt-3">
      <span class="input-group-text bg-secondary-subtle" id="basic-addon1">Description</span>
      <input id="Description" type="text" class="form-control row-6" placeholder="Description" aria-label="Username"
        aria-describedby="basic-addon1" />
    </div>
    <button id="create" class="btn btn-primary">Create</button>
    <button id="back" class="btn btn-primary">To Main Page</button>
  </div>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    const firebaseConfig = {
      apiKey: "AIzaSyAoBVcu8wGcLOy58iUpf5atiVFl3sQvp00",
      authDomain: "newiguess-6075f.firebaseapp.com",
      projectId: "newiguess-6075f",
      storageBucket: "newiguess-6075f.firebasestorage.app",
      messagingSenderId: "265431246225",
      appId: "1:265431246225:web:dc550005726e55d2c0a630",
      measurementId: "G-V7X62BD2DV",
    };
    import {
      getAuth,
      onAuthStateChanged,

    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import {
      getDatabase,
      ref,
      set,
      push,
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase()
    const create = document.getElementById('create');
    const database = getDatabase(app)
    create.addEventListener('click', () => {
      event.preventDefault();
      const section = document.getElementById("section").value
      const Name = document.getElementById('Name').value
      const Type = document.getElementById('Type').value
      const Price = document.getElementById('price').value
      const Ingredients = document.getElementById('ingredients').value
      const Des = document.getElementById('Description').value
      const sectionRef = ref(database, section)
      const newDishRef = push(sectionRef)
      set(newDishRef, {
        Name: Name,
        Type: Type,
        Price: Price,
        Ingredients: Ingredients,
        Des: Des
      })
        .then(() => {
          alert('thành công');
          document.getElementById('addDishForm')
        })
        .catch((error) => {
          console.log(error)
        })
    });
    const back = document.getElementById('back')
    back.addEventListener('click', () => {
      window.location.href = 'http://127.0.0.1:5500/code/FoodList.html'
    })

    const reset = document.getElementById('reset')
    reset.addEventListener('click', () => {
      document.getElementById('Name').value = ""
      document.getElementById('Type').value = ""
      document.getElementById('price').value = ""
      document.getElementById('ingredients').value = ""
      document.getElementById('Description').value = ""
    })
  </script>
</body>

</html>